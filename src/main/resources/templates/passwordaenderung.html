<!doctype html>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.thymeleaf.org/thymeleaf-extras-springsecurity4">

<head th:fragment="head">
    <meta charset="utf-8"/>
    <meta http-equiv="X-UA-Compatible" content="IE=edge"/>
    <meta name="viewport" content="width=device-width, initial-scale=1"/>
    <link rel="stylesheet" type="text/css" th:href="@{/webjars/bootstrap/3.3.7/css/bootstrap.min.css}"/>
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.7.2/css/all.css">
    <link rel="stylesheet" type="text/css" th:href="@{/css/main.css}"/>
 	<link rel="stylesheet" type="text/css" th:href="@{/css/index.css}"/>
 	<link rel="stylesheet" type="text/css" th:href="@{/css/forms.css}"/>
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.0/css/bootstrap.min.css">
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
	<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.0/js/bootstrap.min.js"></script>
 	<title>Passwort ändern</title>
 <head th:replace="/fragment/header :: header"></head>	
</head>
	<body class="genBackground">
		<div class="container">
			<h2>Passwort ändern</h2>
		   <div class="row">
					<form action="#" th:action="@{/passwordaenderung}" th:object="${UserCreationDto}">
					        <table class="mainTable">
					            <thead>
					                <tr>
					                	<th class="CellWithComment"><i class="far fa-question-circle"></i>
											<span class="CellComment" >Mitarbeiter auswählen</span>
										</th>
					                </tr>
					            </thead>
					            <tbody>
									<tr th:each="user, itemStat : *{users}">
									    <td>
										    <input	type="text"
									    		name="benutzername"
									    		th:field="*{users[__${itemStat.index}__].username}" 
									    		th:id="${itemStat.index}"
									    		class="btn btn-info btn-lg" data-toggle="modal" data-target="#passwordChange" readonly/>
									    </td>
									</tr>
					            </tbody>
					        </table>
					</form>
					
		            <div th:if="${param.success}">
		                <div class="alert alert-info">
		                    The user password was successfully changed.
		                </div>
		          </div>
		    </div>
		</div>
		
	  <div class="modal fade" id="passwordChange" role="dialog">
	    <div class="modal-dialog">
	      <div class="modal-content">
	        <div class="modal-header">
	          <button type="button" class="close" data-dismiss="modal">&times;</button>
	          <h4 class="modal-title">Passwort ändern</h4>
	        </div>
	        <div class="modal-body">
	        	<form action="#" th:action="@{/passwordaenderung}" th:object="${UserCreationDto}">
			        <table class="mainTable">
			            <thead>
			                <tr>
			                	<th class="CellWithComment"><i class="far fa-question-circle"></i>
									<span class="CellComment" >Mitarbeiter auswählen</span>
								</th>
			                    <th>Username</th>
			                    <th>Password</th>
			                </tr>
			            </thead>
			            <tbody>
							<tr th:each="user, itemStat : *{users}">
							    <td>
								    <input	type="text"
							    		name="benutzername"
							    		th:field="*{users[__${itemStat.index}__].username}" 
							    		th:id="${itemStat.index}" readonly/>
							    </td>
							    
							    <td>
							    	<input 	type="password" class="passwordField" style="margin-left: 0px;"
							    			name="passwordField" 
							    			th:field="*{users[__${itemStat.index}__].password}" 
							    			th:id="${itemStat.index}"/>
							    </td>
							</tr>
			            </tbody>
			        </table>
				</form>
	        </div>
	      </div>
	    </div>
	  </div>

	<script>
		function form_submit() {
			document.getElementById("paymentitrform").submit();
		}
	</script>  
	</body>
</html>